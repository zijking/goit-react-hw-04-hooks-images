(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,n){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__35J9R",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__9Kr5T"}},12:function(e,t,n){e.exports={overlay:"Modal_overlay__260dU",modal:"Modal_modal__3VDG2"}},16:function(e,t,n){e.exports={button:"ButtonLoadMore_button__3SguM"}},17:function(e,t,n){e.exports={imageGallery:"ImageGallery_imageGallery__tzxsJ"}},26:function(e,t,n){},4:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__1pSO6",searchForm:"Searchbar_searchForm__2VcNG",searchFormButton:"Searchbar_searchFormButton__2ZFbO",searchFormBbutton:"Searchbar_searchFormBbutton__1BK1O",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__2EHmF",searchFormInput:"Searchbar_searchFormInput__1BA_b",searchFormISnput:"Searchbar_searchFormISnput__3bcxp"}},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),o=n(14),s=n.n(o),i=(n(26),n(6)),u=n(7),l=n(20),h=n(19),m=n(3),b=n(4),d=n.n(b);var g=function(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(m.a)(n,2),o=c[0],s=c[1];return Object(a.jsx)("header",{className:d.a.searchbar,children:Object(a.jsxs)("form",{onSubmit:function(e){""!==o.trim()?(e.preventDefault(),t(o)):alert("Write SEARCH WORD !!!")},className:d.a.searchForm,children:[Object(a.jsx)("button",{type:"submit",className:d.a.searchFormButton,children:Object(a.jsx)("span",{className:d.a.searchFormButtonLabel})}),Object(a.jsx)("input",{name:"search",className:d.a.searchFormInput,onChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"search":s(a);break;default:return}},type:"text",placeholder:"Search images and photos",value:o})]})})},j=n(10),f=n.n(j),p=n(13),O=n(15),y="19017356-b8756222892cfba3d959da30c",v="https://pixabay.com/api/",_=function(){function e(){Object(i.a)(this,e),this.page=1,this.searchWord=""}return Object(u.a)(e,[{key:"searchImg",value:function(){return fetch("".concat(v,"\\?key=").concat(y,"&q=").concat(this.searchWord,"&per_page=").concat(20,"&page=").concat(this.page)).then((function(e){return e.json()}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"searchImgById",value:function(e){return fetch("".concat(v,"\\?key=").concat(y,"&id=").concat(e)).then((function(e){return e.json()}))}},{key:"resetPage",value:function(){this.page=1}},{key:"setPage",set:function(e){e!==this.page&&e<this.page&&(this.page=e,console.log("new page big"))}},{key:"query",get:function(){return this.searchWord}},{key:"queryWord",set:function(e){this.searchWord=e}},{key:"currentPage",get:function(){return this.page}}]),e}(),x=n(16),I=n.n(x);var S=function(e){var t=e.onClick;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("button",{type:"button",className:I.a.button,onClick:t,children:"Load more"})})},w=n(17),k=n.n(w),F=n(11),N=n.n(F);var B=function(e){var t=e.img,n=e.onClickM;return Object(a.jsx)("li",{id:t.id,onClick:function(e){if("LI"===e.currentTarget.nodeName){var t=e.currentTarget.id;n(t)}},className:N.a.imageGalleryItem,children:Object(a.jsx)("img",{src:t.webformatURL,alt:t.tags,className:N.a.imageGalleryItemImage})})},G=n(12),C=n.n(G);var L=function(e){var t=e.item,n=e.toggleModal;Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}),[]);var c=function(e){"Escape"===e.code&&n()};return Object(a.jsx)("div",{onClick:function(e){e.currentTarget===e.target&&n()},className:C.a.overlay,children:Object(a.jsx)("div",{className:C.a.modal,children:Object(a.jsx)("img",{src:t.largeImageURL,alt:t.tags})})})},E=(n(28),n(18)),M=n.n(E);var T=function(){return Object(a.jsx)("div",{className:"loader",children:Object(a.jsx)(M.a,{type:"TailSpin",color:"#3F51B5",height:500,width:500})})};var P=function(e){var t=e.sword,n=Object(r.useState)(null),c=Object(m.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)(!1),u=Object(m.a)(i,2),l=u[0],h=u[1],b=Object(r.useState)(!1),d=Object(m.a)(b,2),g=d[0],j=d[1],y=Object(r.useState)(0),v=Object(m.a)(y,2),x=v[0],I=v[1],w=Object(r.useRef)(new _),F=Object(r.useRef)(!1);Object(r.useEffect)((function(){F.current?(w.current.resetPage(),s(null),w.current.queryWord=t,j(!0),w.current.searchImg().then((function(e){s(e.hits)})).finally(j(!1))):F.current=!0}),[t]);var N=function(e){var t=Number(e),n=o.findIndex((function(e){return e.id===t}));I(n),G()},G=function(){h((function(e){return!e}))};function C(){return(C=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.current.incrementPage();case 2:return e.next=4,w.current.searchImg().then((function(e){s((function(t){return[].concat(Object(p.a)(t),Object(p.a)(e.hits))}))}));case 4:window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[g&&Object(a.jsx)(T,{}),Object(a.jsx)("ul",{className:k.a.imageGallery,children:o&&o.map((function(e){return Object(a.jsx)(B,{img:e,onClickM:N},e.id)}))}),o&&Object(a.jsx)(S,{onClick:function(){return function(e){return C.apply(this,arguments)}()}}),l&&Object(a.jsx)(L,{toggleModal:G,item:o[x]})]})},W=(n(50),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={modalShow:!1,sword:""},e.searchImg=new _,e.handelSubmit=function(t){e.setState({sword:t})},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(g,{onSubmit:this.handelSubmit}),Object(a.jsx)(P,{sword:this.state.sword})]})}}]),n}(r.Component)),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root")),R()}},[[51,1,2]]]);
//# sourceMappingURL=main.7696655f.chunk.js.map